<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Invito üíö</title>
  <style>
    :root{
      --bg1:#063a1f;
      --bg2:#0a4f2a;
      --card:#0f6b38cc;
      --card2:#0b5a30cc;
      --text:#eafff1;
      --muted:#c8ffe0;
      --line:#2ee58a55;
      --btn:#2ee58a;
      --btn2:#19c56d;
      --danger:#ffb3b3;
      --ok:#b7ffd6;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 700px at 20% 10%, #0b6b39 0%, transparent 55%),
                  radial-gradient(900px 600px at 80% 20%, #0f8a49 0%, transparent 50%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
    }
    a{color:inherit; text-decoration:none}
    .wrap{width:min(1100px, 92vw); margin:0 auto;}
    header{
      position:sticky; top:0;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, #062f1acc, #062f1a66);
      border-bottom:1px solid var(--line);
      z-index:10;
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 0;
      gap:14px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:800; letter-spacing:.3px;
    }
    .dot{
      width:12px;height:12px;border-radius:999px;
      background: var(--btn);
      box-shadow: 0 0 0 6px #2ee58a22, 0 0 24px #2ee58a44;
    }
    nav ul{
      list-style:none; padding:0; margin:0;
      display:flex; gap:18px; align-items:center;
      font-weight:600; color:var(--muted);
    }
    nav a{opacity:.9}
    nav a:hover{opacity:1; text-decoration:underline}
    .pill{
      padding:10px 14px;
      border:1px solid var(--line);
      background:#05301866;
      border-radius:999px;
      font-size:14px;
    }

    /* HERO */
    .hero{
      padding:34px 0 26px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:22px;
      align-items:stretch;
    }
    @media (max-width: 860px){
      .hero{grid-template-columns:1fr}
    }
    .card{
      background: linear-gradient(180deg, var(--card), var(--card2));
      border:1px solid var(--line);
      border-radius:26px;
      padding:26px;
      box-shadow:0 18px 40px #00000055;
    }
    h1{
      margin:0 0 12px;
      font-size: clamp(26px, 3.6vw, 40px);
      line-height:1.1;
    }
    .lead{
      margin:0;
      font-size:18px;
      line-height:1.6;
      color:var(--text);
    }
    .meta{
      display:flex; flex-wrap:wrap; gap:10px;
      margin-top:16px;
      color:var(--muted);
    }
    .btnrow{display:flex; flex-wrap:wrap; gap:12px; margin-top:18px;}
    button{
      border:0; cursor:pointer;
      border-radius:999px;
      padding:12px 18px;
      font-weight:800;
      letter-spacing:.2px;
    }
    .primary{
      background: linear-gradient(180deg, var(--btn), var(--btn2));
      color:#033018;
      box-shadow: 0 10px 22px #00000044;
    }
    .ghost{
      background:#05301866;
      color:var(--text);
      border:1px solid var(--line);
    }
    button:hover{transform: translateY(-1px);}
    button:active{transform: translateY(0);}

    .side h2{margin:0 0 10px; font-size:18px; color:var(--muted)}
    .side p{margin:0; line-height:1.6; color:var(--text)}
    .divider{height:1px; background:var(--line); margin:16px 0;}

    /* SEZIONI */
    section{padding:10px 0 34px}
    .hidden{display:none;}
    .panel-title{
      font-size:18px;
      color:var(--muted);
      margin:0 0 10px;
      font-weight:800;
      letter-spacing:.2px;
    }

    /* QUIZ */
    .quizBox{
      display:grid;
      gap:14px;
    }
    .q{
      font-size:20px;
      font-weight:800;
      margin:0;
    }
    .hint{
      margin:0;
      color:var(--muted);
      line-height:1.5;
    }
    .answerRow{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
    }
    input{
      border-radius:14px;
      border:1px solid var(--line);
      background:#042714aa;
      color:var(--text);
      padding:12px 14px;
      font-size:16px;
      outline:none;
      width:min(420px, 100%);
    }
    .small{
      font-size:14px; color:var(--muted);
    }
    .msg{
      margin:0;
      font-weight:700;
    }
    .msg.ok{color:var(--ok)}
    .msg.bad{color:var(--danger)}

    /* CODICE */
    .attempts{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      color:var(--muted);
      font-weight:700;
    }
    .badge{
      padding:8px 12px;
      border-radius:999px;
      background:#042714aa;
      border:1px solid var(--line);
      font-size:14px;
    }

    /* SORPRESA */
    .surprise h2{
      margin:0 0 10px;
      font-size: clamp(22px, 3vw, 30px);
    }
    .surprise p{margin:0; line-height:1.65; font-size:18px}
  </style>
</head>
<body>

<header>
  <div class="wrap nav">
    <div class="brand">
      <span class="dot"></span>
      <span>Invito Segreto</span>
    </div>
    <nav>
      <ul>
        <li><a href="https://matteocontrafatto18-eng.github.io/Invito/#home" onclick="showView('home')">Home</a></li>
        <li><a href="#gioco" onclick="startFlow()">Gioco</a></li>
        <li><span class="pill">Güíö</span></li>
      </ul>
    </nav>
  </div>
</header>

<main class="wrap">

  <!-- HOME / HERO -->
  <section id="homeView">
    <div class="hero" id="home">

      <div class="card">
        <h1>INVITO PER GIULI SABATO - DOMENICA 17-18 GENNAIO üíõ</h1>
        <p class="lead">
          Ho preparato qualcosa di speciale per noi<br>
          Cosa devi portare oltre te stessa : <br>
          - Un pigiamino Sexy <br>
          - Un costumino<br>
          - Le carte focose diciamo hihihi<br>
          Al resto penso tutto io ü•∞<br>
          Dopo le lezioni di sabato passo a prenderti , let me cook.<br>
          FIDATI DI ME üíõ
        </p>

        <div class="meta">
          <span class="badge">üìÖ 17-18 Gennaio</span>
          <span class="badge">üöó Passo io</span>
          <span class="badge">üîê Finale a sorpresa</span>
        </div>

        <div class="btnrow">
          <button class="primary" onclick="startFlow()">Scopri di pi√π</button>
        </div>
      </div>

      <div class="card side">
        <h2>Come funziona</h2>
        <p>
          Ti faccio fare un mini-percorso üíö<br>
          1) 3 domande semplici<br>
          2) Se le indovini, arrivi al codice üîê<br>
          3) Hai massimo <strong>20 tentativi</strong> per sbloccare la sorpresa
        </p>
        <div class="divider"></div>
        <p class="small">
          (Consiglio: rispondi pensando a noi.)
        </p>
      </div>

    </div>
  </section>

  <!-- GIOCO -->
  <section id="gameView" class="hidden">
    <div class="card" id="gioco">
      <div class="panel-title">Mini-gioco üíö (3 domande)</div>

      <div class="quizBox">
        <p class="q" id="questionText">Domanda</p>
        <p class="hint" id="questionHint">Suggerimento</p>

        <div class="answerRow">
          <input id="answerInput" type="text" placeholder="Scrivi qui..." autocomplete="off" />
          <button class="primary" onclick="submitAnswer()">Rispondi</button>
          <button class="ghost" onclick="resetQuiz()">Ricomincia</button>
        </div>

        <p class="msg" id="quizMsg"></p>
        <p class="small" id="progressText"></p>
      </div>
    </div>
  </section>

  <!-- CODICE -->
  <section id="codeView" class="hidden">
    <div class="card">
      <div class="panel-title">Ultimo step üîê</div>

      <p class="q">Inserisci la sequenza segreta</p>
      <p class="hint">Solo se indovini potrai scoprire dove andremo!</p>

      <div class="attempts">
        <span class="badge">Tentativi rimasti: <span id="attemptLeft">20</span></span>
        <span class="badge">Max: 20</span>
      </div>

      <div class="answerRow" style="margin-top:10px">
        <input id="codeInput" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" inputmode="numeric" />
        <button class="primary" onclick="tryCode()">Scopri</button>
        <button class="ghost" onclick="backToGame()">Torna al gioco</button>
      </div>

      <p class="msg" id="codeMsg"></p>
      <p class="small">Suggerimento: pensa a noi üí≠</p>
    </div>
  </section>

  <!-- SORPRESA -->
  <section id="surpriseView" class="hidden">
    <div class="card surprise">
      <h2>‚ú® √à una fuga per noi ‚ú®</h2>
      <p>
        Una casa immersa nella natura üå≤<br>
        solo silenzio, tempo lento e noi due.
      </p>
      <div class="divider"></div>
      <p>
        ü´ß <strong>Jacuzzi calda</strong><br>
        üî• <strong>Sauna privata</strong><br>
        üåô stelle sopra di noi
      </p>
      <div class="divider"></div>
      <p>
        Niente orari. Niente pensieri.<br>
        Solo io e te ‚ù§Ô∏è
      </p>
    </div>
  </section>

</main>

<script>
  // ====== CONFIG ======
  const SECRET_CODE = "1218"; // <<< CAMBIA QUI IL CODICE FINALE
  const MAX_ATTEMPTS = 20;

  // 3 domande semplici: modifica qui se vuoi (domanda, hint, risposte accettate)
  const QUIZ = [
    {
      q: "Domanda 1: Giorno in cui ci siamo messi insieme?",
      hint: "üíö",
      answers: ["1 settembre", "1/09/24", "1 settembre 2024"]
    },
    {
      q: "Domanda 2: Quanto ti amo da 1 a 100?",
      hint: "Non puoi sbagliare",
      answers: ["100"]
    },
    {
      q: "Domanda 3: La mia serie preferita?",
      hint: "So che potresti ricordarti il nome quindi la faccio difficile apposta hihihihi iniziali B.B.",
      answers: ["breaking bad", "Breaking Bad", "breakingbad", "BreakingBad"]
    }
  ];

  // ====== STATE ======
  let qIndex = 0;
  let attemptsLeft = MAX_ATTEMPTS;

  // ====== HELPERS ======
  function normalize(s){
    return (s || "")
      .toString()
      .trim()
      .toLowerCase()
      .replace(/\s+/g, " ")
      .replace(/[‚Äô']/g, "'"); // uniforma apostrofi
  }

  function scrollToId(id){
    const el = document.getElementById(id);
    if(el) el.scrollIntoView({behavior:"smooth", block:"start"});
  }

  function showView(view){
    const views = ["homeView","gameView","codeView","surpriseView"];
    views.forEach(v => document.getElementById(v).classList.add("hidden"));
    document.getElementById(view).classList.remove("hidden");
  }

  // ====== FLOW ======
  function startFlow(){
    showView("gameView");
    resetQuiz();
    scrollToId("gioco");
  }

  function resetQuiz(){
    qIndex = 0;
    setQuestion();
    setQuizMsg("", "");
    document.getElementById("answerInput").value = "";
    document.getElementById("answerInput").focus();
  }

  function setQuestion(){
    const item = QUIZ[qIndex];
    document.getElementById("questionText").textContent = item.q;
    document.getElementById("questionHint").textContent = item.hint;
    document.getElementById("progressText").textContent = `Progresso: ${qIndex+1}/3`;
  }

  function setQuizMsg(text, type){
    const el = document.getElementById("quizMsg");
    el.textContent = text;
    el.className = "msg" + (type ? " " + type : "");
  }

  function submitAnswer(){
    const input = normalize(document.getElementById("answerInput").value);
    const item = QUIZ[qIndex];
    const ok = item.answers.map(normalize).includes(input);

    if(!input){
      setQuizMsg("Scrivi una risposta üí≠", "bad");
      return;
    }

    if(ok){
      setQuizMsg("Perfetto üíö", "ok");
      qIndex++;
      document.getElementById("answerInput").value = "";

      if(qIndex >= QUIZ.length){
        // sblocca codice
        attemptsLeft = MAX_ATTEMPTS;
        document.getElementById("attemptLeft").textContent = attemptsLeft;
        document.getElementById("codeInput").value = "";
        document.getElementById("codeMsg").textContent = "";
        showView("codeView");
        document.getElementById("codeInput").focus();
        return;
      }

      setTimeout(() => {
        setQuestion();
        setQuizMsg("", "");
        document.getElementById("answerInput").focus();
      }, 500);

    } else {
      setQuizMsg("Nooo üòÑ riprova‚Ä¶ (pensa a noi)", "bad");
      document.getElementById("answerInput").focus();
      document.getElementById("answerInput").select();
    }
  }

  function backToGame(){
    showView("gameView");
    scrollToId("gioco");
  }

  // ====== CODE ======
  function tryCode(){
    const input = normalize(document.getElementById("codeInput").value);
    const msg = document.getElementById("codeMsg");

    if(attemptsLeft <= 0){
      msg.textContent = "Tentativi finiti üò∂‚Äçüå´Ô∏è Torna al gioco e riprova da capo.";
      msg.className = "msg bad";
      return;
    }

    if(!input){
      msg.textContent = "Inserisci un codice üí≠";
      msg.className = "msg bad";
      return;
    }

    if(input === normalize(SECRET_CODE)){
      showView("surpriseView");
      return;
    }

    attemptsLeft--;
    document.getElementById("attemptLeft").textContent = attemptsLeft;

    if(attemptsLeft <= 0){
      msg.textContent = "Ok stop üòÑ Tentativi finiti. Torna al gioco e risblocca il codice.";
      msg.className = "msg bad";
    } else {
      msg.textContent = `Codice sbagliato‚Ä¶ riprova üíö (rimasti ${attemptsLeft})`;
      msg.className = "msg bad";
    }

    document.getElementById("codeInput").focus();
    document.getElementById("codeInput").select();
  }

  // Avvio: resta in home
  showView("homeView");
</script>

</body>
</html>
